–ù–∞ –æ—Å–Ω–æ–≤—ñ –Ω–∞–¥–∞–Ω–∏—Ö –≤–∞–º–∏ –¥–∞–Ω–∏—Ö —è —Å—Ç–≤–æ—Ä—é –¥–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∏ —Ç–∞ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—é –¥–ª—è –∫–ª—é—á–æ–≤–∏—Ö –µ–Ω–¥–ø–æ—ñ–Ω—Ç—ñ–≤, –∑–æ—Å–µ—Ä–µ–¥–∂—É—é—á–∏—Å—å –Ω–∞ —Ç–∏—Ö, —â–æ —Å—Ç–æ—Å—É—é—Ç—å—Å—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É Insights (AI –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞, —Ç—Ä–µ–Ω–¥–∏, –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤).

## üìã –ó–∞–≥–∞–ª—å–Ω–∞ –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ —Å–∏—Å—Ç–µ–º–∏

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
- –ë—ñ–ª—å—à—ñ—Å—Ç—å –µ–Ω–¥–ø–æ—ñ–Ω—Ç—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å  bearer token
- –î–µ—è–∫—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è/—Å–∫–∞—á—É–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ –Ω–µ –≤–∏–º–∞–≥–∞—é—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó, –∞–ª–µ –º–∞—é—Ç—å –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤–ª–∞—Å–Ω–∏–∫–∞

### üìä –û—Å–Ω–æ–≤–Ω—ñ –º–æ–¥—É–ª—ñ
- **Health Data** - –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –º–µ–¥–∏—á–Ω–∏—Ö –ø–æ–∫–∞–∑–Ω–∏–∫—ñ–≤
- **AI Insights** - –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏ —á–µ—Ä–µ–∑ OpenAI
- **Uploads** - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ñ–∞–π–ª–∞–º–∏
- **Goals & Progress** - —Ü—ñ–ª—ñ —Ç–∞ –ø—Ä–æ–≥—Ä–µ—Å
- **Medical History** - –º–µ–¥–∏—á–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è

---

## üß† –ö–ª—é—á–æ–≤—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏ –¥–ª—è Insights —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É

### 1. **POST /generate-insight**
**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è AI-—ñ–Ω—Å–∞–π—Ç—ñ–≤ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∑–∞–ø–∏—Ç—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

**Request Body**:
```json
{
  "query": "string (required)",
  "user_id": "uuid (required)", 
  "metrics": "object (required)"
}
```

**Business Logic**:
1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
2. –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∑–∞–ø–∏—Ç—É –Ω–∞ –±–µ–∑–ø–µ–∫—É
3. –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –∑–∞–ø–∏—Ç—É –¥–æ OpenAI API –∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
4. –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ–Ω—Å–∞–π—Ç—É –≤ `al_insights`
5. –õ–æ–≥—É–≤–∞–Ω–Ω—è –∞—É–¥–∏—Ç—É –≤ `al_audits_logs`

**Response**:
```json
{
  "result": "AI generated insight text",
  "success": "true"
}
```

---

### 2. **POST /metrics/forecast** 
**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –ü—Ä–æ–≥–Ω–æ–∑—É–≤–∞–Ω–Ω—è —Ç—Ä–µ–Ω–¥—ñ–≤ –∑–¥–æ—Ä–æ–≤'—è

**Request Body**:
```json
{
  "type_metric": "string (required)"
}
```

**Business Logic**:
1. –ó–∞–ø–∏—Ç —ñ—Å—Ç–æ—Ä–∏—á–Ω–∏—Ö –¥–∞–Ω–∏—Ö –∑ `health_data`
2. –ê–Ω–∞–ª—ñ–∑ —Ç—Ä–µ–Ω–¥—ñ–≤ —á–µ—Ä–µ–∑ AI
3. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø—Ä–æ–≥–Ω–æ–∑—É –Ω–∞ –Ω–∞–π–±–ª–∏–∂—á—ñ –¥–Ω—ñ
4. –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –∑–≥—ñ–¥–Ω–æ –≤–∏–º–æ–≥ (1 —Ä–µ—á–µ–Ω–Ω—è)

**Response**:
```json
{
  "succes": "true",
  "result_message": "–ü—Ä–æ–≥–Ω–æ–∑–æ–≤–∞–Ω–µ –∑–Ω–∏–∂–µ–Ω–Ω—è –ø—É–ª—å—Å—É –Ω–∞ 5-7 —É–¥–∞—Ä—ñ–≤ –ø—Ä–æ—Ç—è–≥–æ–º –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Ç–∏–∂–Ω—è"
}
```

---

### 3. **POST /metrics/trends**
**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –û—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ—Å—Ç–æ—Ä–∏—á–Ω–∏—Ö –¥–∞–Ω–∏—Ö –¥–ª—è –≥—Ä–∞—Ñ—ñ–∫—ñ–≤

**Request Body**:
```json
{
  "type_metric": "string (required)",
  "period": "string (required)", 
  "user_id": "uuid",
  "start_date": "string (required)",
  "end_date": "string (required)"
}
```

**Business Logic**:
1. –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö –∑–∞ –ø–µ—Ä—ñ–æ–¥–æ–º
2. –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –º–µ—Ç—Ä–∏–∫ –∑–∞ —Ç–∏–ø–æ–º
3. –î–æ–¥–∞–≤–∞–Ω–Ω—è –≤—ñ–¥—Å—É—Ç–Ω—ñ—Ö –¥–Ω—ñ–≤
4. –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–≥—Ä–∞—Ñ—ñ–∫—ñ–≤

**Response**:
```json
{
  "succes": "true",
  "health_data_list": [...],
  "filter_list_period": [...]
}
```

---

## üìÅ –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏ –¥–ª—è Uploads (–Ω–æ–≤–∞ –≤–∫–ª–∞–¥–∫–∞ –≤ Insights)

### 4. **POST /upload/attachment_file**
**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–µ–¥–∏—á–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤

**Multipart Form Data**:
```
file: binary (required)
user_id: uuid (required)
category: enum ["Labs","Radiology","Notes","Medical"] (required)
file_type: enum ["pdf"] (required) 
file_name: string (required)
```

**Business Logic**:
1. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–ø–∏—Å—É –≤ `uploads`
2. –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—É –≤ —Å—Ö–æ–≤–∏—â—ñ
3. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –º–µ—Ç–∞–¥–∞–Ω–∏—Ö (–∫–∞—Ç–µ–≥–æ—Ä—ñ—è, —Ç–∏–ø)
4. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø—É–±–ª—ñ—á–Ω–æ–≥–æ/–ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ URL

**Response**:
```json
{
  "saved_upload": {
    "id": 123,
    "user_id": "uuid",
    "filename": "lab_results.pdf",
    "file_type": "pdf",
    "category": "Labs",
    "path": "https://storage/url/file.pdf",
    "file": {...}
  }
}
```

---

### 5. **GET /upload/download_file**
**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –°–∫–∞—á—É–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ –∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é –¥–æ—Å—Ç—É–ø—É

**Query Parameters**:
```
file_id: string (required)
user_id: uuid (required)
```

**Business Logic**:
1. –ü–æ—à—É–∫ —Ñ–∞–π–ª—É –≤ `uploads` –∑–∞ `file_id`
2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —â–æ `user_upload_file != null`
3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—ñ: `user_upload_file.private_file != null`
4. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–ª–∞—Å–Ω–∏–∫–∞: `user_upload_file.user_id == input.user_id`
5. –Ø–∫—â–æ –≤—Å—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ñ - –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è `file_url`

**Response**:
```json
{
  "file_url": "https://storage/secure-url/document.pdf"
}
```

---

### 6. **GET /upload/get_files**
**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É –≤—Å—ñ—Ö —Ñ–∞–π–ª—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

**Query Parameters**:
```
user_id: uuid (required)
```

**Business Logic**:
1. –ó–∞–ø–∏—Ç –≤—Å—ñ—Ö –∑–∞–ø–∏—Å—ñ–≤ –∑ `uploads` –¥–ª—è `user_id`
2. –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –Ω–µ –≤–∏–¥–∞–ª–µ–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤ (`deleted = false`)
3. –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏

**Response**:
```json
{
  "result": [
    {
      "id": 123,
      "filename": "blood_test.pdf",
      "file_type": "pdf", 
      "category": "Labs",
      "uploaded_at": "2024-01-15T10:30:00Z",
      "path": "https://storage/url/file.pdf",
      "notes": "January blood work"
    }
  ]
}
```

---

## üö® –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏ –¥–ª—è Early Alerts

### 7. **POST /check-threshold**
**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ—Ä–æ–≥–æ–≤–∏—Ö –∑–Ω–∞—á–µ–Ω—å —Ç–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –∞–ª–µ—Ä—Ç—ñ–≤

**Request Body**:
```json
{
  "user_id": "uuid (required)",
  "metrics": "object"
}
```

**Business Logic**:
1. –ê–Ω–∞–ª—ñ–∑ –ø–æ—Ç–æ—á–Ω–∏—Ö –º–µ—Ç—Ä–∏–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
2. –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –∑ –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω–∏–º–∏ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏
3. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–ª–µ—Ä—Ç—ñ–≤ –ø—Ä–∏ –ø–æ—Ä—É—à–µ–Ω–Ω—ñ –ø–æ—Ä–æ–≥—ñ–≤
4. –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Å–µ—Ä–π–æ–∑–Ω–æ—Å—Ç—ñ —Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó

### 8. **GET /get-comprehensive-alerts**
**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –û—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—Å—ñ—Ö –∞–∫—Ç–∏–≤–Ω–∏—Ö –∞–ª–µ—Ä—Ç—ñ–≤

**Query Parameters**:
```
user_id: uuid (required)
```

**Response**:
```json
{
  "result": [
    {
      "metric_name": "Heart Rate",
      "alert_type": "threshold", 
      "description": "Resting heart rate consistently above 100 bpm",
      "severity": "high",
      "triggered_at": "2024-01-15T08:00:00Z"
    }
  ]
}
```

---

## üîß –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### –ë–µ–∑–ø–µ–∫–∞ –¥–∞–Ω–∏—Ö:
- –ü—Ä–∏–≤–∞—Ç–Ω—ñ —Ñ–∞–π–ª–∏ –º–∞—é—Ç—å `private_file` –ø–æ–ª–µ
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ `user_id` –¥–ª—è –≤—Å—ñ—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π –∑ –¥–∞–Ω–∏–º–∏


### –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫:
- 400 - –Ω–µ–≤—ñ—Ä–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏
- 401 - –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π –¥–æ—Å—Ç—É–ø  
- 403 - –¥–æ—Å—Ç—É–ø –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–∏–π
- 404 - —Ä–µ—Å—É—Ä—Å –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ
- 429 - –∑–∞–±–∞–≥–∞—Ç–æ –∑–∞–ø–∏—Ç—ñ–≤

### –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:
- –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –Ω–∞–±–æ—Ä—ñ–≤ –¥–∞–Ω–∏—Ö
- –ö–µ—à—É–≤–∞–Ω–Ω—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø–∏—Ç—ñ–≤
- –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

–¶—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–±–µ–∑–ø–µ—á—É—î –ø–æ–≤–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –¥–ª—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó Insights —Ä–æ–∑–¥—ñ–ª—É –∑ AI-–∞–Ω–∞–ª—ñ—Ç–∏–∫–æ—é, —Ç—Ä–µ–Ω–¥–∞–º–∏, –∞–ª–µ—Ä—Ç–∞–º–∏ —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è–º —Ñ–∞–π–ª–∞–º–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ –≤–∞—à–∏—Ö –≤–∏–º–æ–≥ MVP.